# Database Integration

In this lesson, we will learn how to integrate MongoDB with Express using Mongoose. We will cover the basics of connecting to a MongoDB database and performing CRUD operations.

## Connecting to MongoDB

To connect to a MongoDB database in Express, we will use the Mongoose library. Mongoose provides a simple and elegant way to interact with MongoDB.

First, install Mongoose using npm:

```bash
npm install mongoose
```

Next, require Mongoose in your Express application:

```javascript
const mongoose = require('mongoose');
```

To connect to a MongoDB database, use the `mongoose.connect()` method:

```javascript
mongoose.connect('mongodb://localhost/mydatabase', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
})
  .then(() => {
    console.log('Connected to MongoDB');
  })
  .catch((error) => {
    console.error('Error connecting to MongoDB:', error);
  });
```

Replace `'mongodb://localhost/mydatabase'` with the connection string for your MongoDB database.

## Performing CRUD Operations

Once connected to the MongoDB database, we can perform CRUD (Create, Read, Update, Delete) operations using Mongoose models.

First, define a Mongoose schema for your data:

```javascript
const todoSchema = new mongoose.Schema({
  title: String,
  completed: Boolean,
});

const Todo = mongoose.model('Todo', todoSchema);
```

The `Todo` model represents a collection in the MongoDB database.

To create a new document, use the `create()` method:

```javascript
Todo.create({ title: 'Buy groceries', completed: false })
  .then((todo) => {
    console.log('Created todo:', todo);
  })
  .catch((error) => {
    console.error('Error creating todo:', error);
  });
```

To retrieve documents, use the `find()` method:

```javascript
Todo.find()
  .then((todos) => {
    console.log('Todos:', todos);
  })
  .catch((error) => {
    console.error('Error retrieving todos:', error);
  });
```

To update a document, use the `updateOne()` method:

```javascript
Todo.updateOne({ _id: '123' }, { completed: true })
  .then(() => {
    console.log('Todo updated');
  })
  .catch((error) => {
    console.error('Error updating todo:', error);
  });
```

To delete a document, use the `deleteOne()` method:

```javascript
Todo.deleteOne({ _id: '123' })
  .then(() => {
    console.log('Todo deleted');
  })
  .catch((error) => {
    console.error('Error deleting todo:', error);
  });
```

These are just a few examples of CRUD operations with MongoDB and Mongoose. You can explore more advanced features and queries in the Mongoose documentation.

## Practical Example

Let's create a full-stack application with Express and MongoDB. We will build a todo app that allows users to create, read, update, and delete todos.

Start by setting up the Express server and connecting to the MongoDB database using Mongoose. Then, create the necessary routes and controllers to handle CRUD operations for todos.

You can find the complete code example in the file `Code Examples/05 Database Integration.js`.

## Exercise

Your task is to build a todo app with database integration. Implement the following features:

- Display a list of todos on the homepage.
- Allow users to create new todos.
- Allow users to update the status of a todo (completed or not completed).
- Allow users to delete a todo.

You can use the code example in `Code Examples/05 Database Integration.js` as a starting point.

Good luck!
```

Please note that the code example mentioned in the Practical Example section is not included here. You can find it in the `Code Examples/05 Database Integration.js` file.